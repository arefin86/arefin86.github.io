var ATTR_ID=1;var camera,scene,renderer;var loader;var center;var controls;var radius=Math.sqrt((80^2)+(150^2));var plotLine;var theta=0;var effectFXAA;var windowHalfX=window.innerWidth/2;var windowHalfY=window.innerHeight/2;var composer;var attrBuffer=[];init();animate();function init(){var b;b=document.createElement("div");document.body.appendChild(b);center=new THREE.Vector3(0,0,0);camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,1000);camera.position.x=0;camera.position.y=0;camera.position.z=55;camera.lookAt(center);renderer=new THREE.WebGLRenderer({antialias:false});renderer.setClearColor(0);renderer.setSize(window.innerWidth,window.innerHeight);renderer.autoClear=false;b.appendChild(renderer.domElement);controls=new THREE.TrackballControls(camera);controls.rotateSpeed=1;controls.zoomSpeed=1.2;controls.panSpeed=1.8;controls.noZoom=false;controls.noPan=true;controls.staticMoving=true;controls.dynamicDampingFactor=0;controls.keys=[65,83,68];scene=new THREE.Scene();var h=Math.floor((Math.random()*15));ATTR_ID=h;var d=createAttractor(h);updateInfo(h);d.computeBoundingSphere();THREE.GeometryUtils.center(d);plotLine=new THREE.Line(d,new THREE.LineBasicMaterial({color:7829486,opacity:1,linewidth:10}));attrBuffer[h]=plotLine;scene.add(plotLine);zoomExtents();var c=new THREE.RenderPass(scene,camera);var g=new THREE.BloomPass(2);var f=new THREE.ShaderPass(THREE.CopyShader);effectFXAA=new THREE.ShaderPass(THREE.FXAAShader);var e=window.innerWidth||2;var a=window.innerHeight||2;effectFXAA.uniforms.resolution.value.set(1/e,1/a);f.renderToScreen=true;composer=new THREE.EffectComposer(renderer);composer.addPass(c);composer.addPass(effectFXAA);composer.addPass(g);composer.addPass(f);window.addEventListener("resize",onWindowResize,false)}function createAttractor(n){if(!n){n=0}var e=new THREE.BufferGeometry();e.attributes={position:{itemSize:3}};if(n==0){x0=0.00001;y0=0.00001;z0=0.00001;var c,p,k,l,o,b;e.attributes.position.array=new Float32Array(20000*3);e.attributes.position.numItems=20000*3;var h=e.attributes.position.array;for(var g=0;g<20000;g++){var f=g/2800000;if(g==0){c=x0;p=y0;k=z0}l=c+f*10*(p-c);o=p+f*((28*c)-p-(c*k));b=k+f*((c*p)-2.7*k);h[g*3]=l;h[g*3+1]=o;h[g*3+2]=b;c=l;p=o;k=b}}else{if(n==1){x0=0.00001;y0=0.00001;z0=0.00001;var c,p,k,l,o,b;e.attributes.position.array=new Float32Array(20000*3);e.attributes.position.numItems=20000*3;var h=e.attributes.position.array;for(var g=0;g<20000;g++){var f=g/500000;if(g==0){c=x0;p=y0;k=z0}l=c+f*(0.9-p);o=p+f*(0.4+k);b=k+f*((c*p)-k);h[g*3]=l;h[g*3+1]=o;h[g*3+2]=b;c=l;p=o;k=b}}else{if(n==2){x0=0.0001;y0=0.0001;z0=0.0001;var c,p,k,l,o,b;e.attributes.position.array=new Float32Array(30000*3);e.attributes.position.numItems=30000*3;var h=e.attributes.position.array;for(var g=0;g<30000;g++){var f=g/500000;if(g==0){c=x0;p=y0;k=z0}l=c+f*((p*c)-k);o=p+f*(c-p);b=k+f*(c+(0.3*k));h[g*3]=l;h[g*3+1]=o;h[g*3+2]=b;c=l;p=o;k=b}}else{if(n==3){x0=0.0001;y0=0.0001;z0=0.0001;var c,p,k,l,o,b;e.attributes.position.array=new Float32Array(28000*3);e.attributes.position.numItems=28000*3;var h=e.attributes.position.array;for(var g=0;g<28000;g++){var f=g/500000;if(g==0){c=x0;p=y0;k=z0}l=c+f*(p*k);o=p+f*(c-p);b=k+f*(1-(c*p));h[g*3]=l;h[g*3+1]=o;h[g*3+2]=b;c=l;p=o;k=b}}else{if(n==4){x0=0;y0=0;z0=0;var c,p,k,l,o,b;e.attributes.position.array=new Float32Array(280*3);e.attributes.position.numItems=280*3;var h=e.attributes.position.array;for(var g=0;g<280;g++){var f=g/500000;if(g==0){c=x0;p=y0;k=z0}l=Math.sin(p)-(k*Math.cos(1.8*c));o=(k*Math.sin(0.71*c))-Math.cos(1.51*p);b=Math.sin(c);h[g*3]=l;h[g*3+1]=o;h[g*3+2]=b;c=l;p=o;k=b}var d=new THREE.Matrix4();d.makeScale(10,10,10);e.applyMatrix(d)}else{if(n==5){x0=0.1;y0=0.1;z0=0.1;var c,p,k,l,o,b;e.attributes.position.array=new Float32Array(30000*3);e.attributes.position.numItems=30000*3;var h=e.attributes.position.array;for(var g=0;g<30000;g++){var f=0.001;if(g==0){c=x0;p=y0;k=z0}l=c+f*((38*(p-c))+(p*k));o=p+f*((80*c)+p-(c*k));b=k+f*((c*p)-8/3*k);h[g*3]=l;h[g*3+1]=o;h[g*3+2]=b;c=l;p=o;k=b}}else{if(n==6){x0=0.01;y0=0.01;z0=0.01;var c,p,k,l,o,b;e.attributes.position.array=new Float32Array(50000*3);e.attributes.position.numItems=50000*3;var h=e.attributes.position.array;for(var g=0;g<50000;g++){var f=0.001;if(g==0){c=x0;p=y0;k=z0}l=c+f*(10*(p-c));o=p+f*((40*c)-(2*c*k));b=k+f*(Math.pow(2.718,(c*p))-(2.5*k));h[g*3]=l;h[g*3+1]=o;h[g*3+2]=b;c=l;p=o;k=b}}else{if(n==7){x0=0.01;y0=0.01;z0=0.01;var c,p,k,l,o,b;e.attributes.position.array=new Float32Array(30000*3);e.attributes.position.numItems=30000*3;var h=e.attributes.position.array;for(var g=0;g<30000;g++){var f=0.001;if(g==0){c=x0;p=y0;k=z0}l=c+f*((40*(p-c))+(0.5*c*k));o=p+f*((20*p)-(c*k));b=k+f*((0.833*k)+(c*p)-(0.65*Math.pow(c,2)));h[g*3]=l;h[g*3+1]=o;h[g*3+2]=b;c=l;p=o;k=b}}else{if(n==8){x0=0.01;y0=0.01;z0=0.01;var c,p,k,l,o,b;e.attributes.position.array=new Float32Array(100000*3);e.attributes.position.numItems=100000*3;var h=e.attributes.position.array;for(var g=0;g<100000;g++){var f=0.001;if(g==0){c=x0;p=y0;k=z0}l=c+f*((-1*Math.pow(p,2))-(Math.pow(k,2))-(0.2*c)+(0.2*8));o=p+f*((c*p)-(4*c*k)-p+1);b=k+f*((4*c*p)+(c*k)-k);h[g*3]=l;h[g*3+1]=o;h[g*3+2]=b;c=l;p=o;k=b}}else{if(n==9){x0=0.01;y0=0.01;z0=0.01;var c,p,k,l,o,b;e.attributes.position.array=new Float32Array(50000*3);e.attributes.position.numItems=50000*3;var h=e.attributes.position.array;for(var g=0;g<50000;g++){var f=0.001;if(g==0){c=x0;p=y0;k=z0}l=c+f*((-0.9*c)+(Math.pow(p,2))-(Math.pow(k,2))+(0.9*9.9));o=p+f*((c*(p-(5*k)))+1);b=k+f*(-k+(c*((5*p)+k)));h[g*3]=l;h[g*3+1]=o;h[g*3+2]=b;c=l;p=o;k=b}}else{if(n==10){x0=0.01;y0=0.01;z0=0.01;var c,p,k,l,o,b;e.attributes.position.array=new Float32Array(1000000*3);e.attributes.position.numItems=1000000*3;var h=e.attributes.position.array;for(var g=0;g<1000000;g++){var f=0.001;if(g==0){c=x0;p=y0;k=z0}l=c+f*(p);o=p+f*(-c+(p*k));b=k+f*(1.5-(Math.pow(p,2)));h[g*3]=l;h[g*3+1]=o;h[g*3+2]=b;c=l;p=o;k=b}}else{if(n==11){x0=0.01;y0=0.01;z0=0.01;var c,p,k,l,o,b;e.attributes.position.array=new Float32Array(500000*3);e.attributes.position.numItems=500000*3;var h=e.attributes.position.array;for(var g=0;g<500000;g++){var f=0.001;if(g==0){c=x0;p=y0;k=z0}l=c+f*(p);o=p+f*(k);b=k+f*((0.8*c)+(-1.1*p)+(-0.45*k)+(-1*Math.pow(c,3)));h[g*3]=l;h[g*3+1]=o;h[g*3+2]=b;c=l;p=o;k=b}var d=new THREE.Matrix4();d.makeScale(10,10,10);e.applyMatrix(d)}else{if(n==12){x0=0.01;y0=0.01;z0=0.01;var c,p,k,l,o,b;e.attributes.position.array=new Float32Array(100000*3);e.attributes.position.numItems=100000*3;var h=e.attributes.position.array;for(var g=0;g<100000;g++){var f=0.01;if(g==0){c=x0;p=y0;k=z0}l=c+f*((-2*c)+(6.7*p)-(p*k));o=p+f*(c);b=k+f*((-k)+(Math.pow(p,2)));h[g*3]=l;h[g*3+1]=o;h[g*3+2]=b;c=l;p=o;k=b}}else{if(n==13){x0=0.01;y0=0.01;z0=0.01;var c,p,k,l,o,b;e.attributes.position.array=new Float32Array((100000-1001)*3);e.attributes.position.numItems=(100000-1001)*3;var h=e.attributes.position.array;for(var g=0;g<100000;g++){var f=0.005;if(g==0){c=x0;p=y0;k=z0}l=c+f*((c*(4-p))+(0.3*k));o=p+f*(-p*(1-Math.pow(c,2)));b=k+f*(-c*(1.5-k)-(0.05*k));if(g>1000){h[g*3]=l;h[g*3+1]=o;h[g*3+2]=b}c=l;p=o;k=b}var d=new THREE.Matrix4();d.makeTranslation(0,10,0);e.applyMatrix(d)}else{if(n==14){x0=0.01;y0=0.01;z0=0.01;var c,p,k,l,o,b;e.attributes.position.array=new Float32Array((1000000-50001)*3);e.attributes.position.numItems=(1000000-50001)*3;var h=e.attributes.position.array;for(var g=0;g<1000000;g++){var f=0.0001;if(g==0){c=x0;p=y0;k=z0}l=c+f*((5*c)-(p*k));o=p+f*((-10*p)+(c*k));b=k+f*((-0.38*k)+((c*p)/3));if(g>50000){h[g*3]=l;h[g*3+1]=o;h[g*3+2]=b}c=l;p=o;k=b}}}}}}}}}}}}}}}}return e}function updateInfo(b){var c=document.getElementById("attr-name");c.innerHTML=attractors[b].name;var e=document.createElement("div");e.id="details";e.innerHTML=attractors[b].eq;c.appendChild(e)}function zoomExtents(){var b=scene.children[0].geometry;var a=b.boundingSphere.radius;camera.position.z=a}function changeAttractor(c){ATTR_ID=ATTR_ID+c;var b;if(ATTR_ID<0){b=(ATTR_ID%15)+15}else{b=ATTR_ID%15}scene.remove(scene.children[0]);if(attrBuffer[b]){plotLine=attrBuffer[b]}else{var d=createAttractor(b);d.computeBoundingSphere();THREE.GeometryUtils.center(d);plotLine=new THREE.Line(d,new THREE.LineBasicMaterial({color:7829486,opacity:1,linewidth:10}));attrBuffer[b]=plotLine}scene.add(plotLine);setTimeout(zoomExtents,50);updateInfo(b)}function onWindowResize(){windowHalfX=window.innerWidth/2;windowHalfY=window.innerHeight/2;camera.aspect=window.innerWidth/window.innerHeight;camera.updateProjectionMatrix();renderer.setSize(window.innerWidth,window.innerHeight);effectFXAA.uniforms.resolution.value.set(1/window.innerWidth,1/window.innerHeight);composer.reset();controls.handleResize();render()}function animate(){requestAnimationFrame(animate);render()}function render(){plotLine.rotation.y=theta;renderer.clear();composer.render();controls.update();plotLine.material.color.setHSL(Math.cos(theta),1,0.8);theta=theta+0.005};